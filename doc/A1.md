# Dehumidifier

## Features

- Supports preset mode
- Supports fan mode
- Supports swing
- Supports humidity setting

## Customize

To customize a dehumidifier device, supply a correctly formatted json string to HA in the midea_ac_lan custom integration configuration. This can be found at **Settings** -> **Devices & Services** -> **Midea AC Lan** -> **Configure** -> **Customize** in HA.

### Possible Device Customization Options

The dehumidifier device has two customization options: **speeds** and **modes**. Both are defined in a json dictionary structure where the key is the data sent to the dehumidifier and the value is the data displayed in the HA.

- **speeds** - Set the possible fan speed levels for a specific dehumidifier. If not set, the possible fan speed levels default to those listed below.

  ```json
  {
    "speeds": {
      "1": "Lowest",
      "40": "Low",
      "60": "Medium",
      "80": "High",
      "102": "Auto",
      "127": "Off"
    }
  }
  ```

- **modes** - Set the possible modes for a specific dehumidifier. If not set, the possible modes default to those listed below.

  ```json
  {
    "modes": {
      "1": "Manual",
      "2": "Continuous",
      "3": "Auto",
      "4": "Clothes-Dry",
      "5": "Shoes-Dry"
    }
  }
  ```

### Example Custom Configuration

Below is a custom configuration for the Midea 50 pt. Cube Dehumidifier with Built-in Pump (MAD50PS1QWT). It has been tested and works correctly for this device as of 2025. Other Midea Cube Dehumidifiers likely have a similar configuration.

```json
{
  "speeds": { "40": "Low", "80": "High" },
  "modes": { "1": "Manual", "2": "Continuous", "4": "Max" }
}
```

If this configuration does not match your Midea Cube Dehumidifier or if you have a completely different dehumidifier that requires customizing these options:

1. Enable debug logging for the midea_ac_lan and midealocal custom components in HA by following the instructions in the debug doc.
2. Use the Midea app to toggle between the different options for the related setting on on the dehumidifier.
3. Examine the HA log to determine the correct key for each option for the setting.
4. Use the option id in the Midea app for the value.

## Entities

### Default entity

| EntityID                          | Class      | Description       |
| --------------------------------- | ---------- | ----------------- |
| humidifier.{DEVICEID}\_humidifier | humidifier | Humidifier entity |

### Extra entities

| EntityID                               | Class         | Description         |
| -------------------------------------- | ------------- | ------------------- |
| sensor.{DEVICEID}\_tank_full           | binary_sensor | Tank Status         |
| sensor.{DEVICEID}\_tank                | sensor        | Tank                |
| sensor.{DEVICEID}\_current_humidity    | sensor        | Current Humidity    |
| sensor.{DEVICEID}\_current_temperature | sensor        | Current Temperature |
| lock.{DEVICEID}\_child_lock            | lock          | Child Lock          |
| switch.{DEVICEID}\_anion               | switch        | Anion               |
| switch.{DEVICEID}\_prompt_tone         | switch        | Prompt Tone         |
| switch.{DEVICEID}\_power               | switch        | Power               |
| switch.{DEVICEID}\_swing               | switch        | Swing               |
| select.{DEVICEID}\_fan_speed           | select        | Fan Speed           |
| select.{DEVICEID}\_water_level_set     | select        | Water Level Setting |

## Service

### midea_ac_lan.set_attribute

[![Service](https://my.home-assistant.io/badges/developer_call_service.svg)](https://my.home-assistant.io/redirect/developer_call_service/?service=midea_ac_lan.set_attribute)

Set the attribute of appliance. Service data:

| Name      | Description                                                        |
| --------- | ------------------------------------------------------------------ |
| device_id | The Appliance code (Device ID) of appliance                        |
| attribute | "child_lock"<br/>"anion"<br/>"prompt_tone"<br/>"power"<br/>"swing" |
| value     | true or false                                                      |

| Name      | Description                                                     |
| --------- | --------------------------------------------------------------- |
| device_id | The Appliance code (Device ID) of appliance                     |
| attribute | "fan_speed"                                                     |
| value     | "Lowest"<br/>"Low"<br/>"Medium"<br/>"High"<br/>"Auto"<br/>"Off" |

| Name      | Description                                 |
| --------- | ------------------------------------------- |
| device_id | The Appliance code (Device ID) of appliance |
| attribute | "water_level_set"                           |
| value     | "25"<br/>"50"<br/>"75"<br/>"100"            |

Example

```yaml
service: midea_ac_lan.set_attribute
data:
  device_id: XXXXXXXXXXXX
  attribute: prompt_tone
  value: true
```

```yaml
service: midea_ac_lan.set_attribute
data:
  device_id: XXXXXXXXXXXX
  attribute: fan_speed
  value: Medium
```
